(node:11608) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/unit/wikipediaService.test.js (7.366 s)
  wikipedia Service
    initialization
      Î“ÃªÃœ should initialize correctly (92 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (2 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (2 ms)

(node:17456) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/unit/weatherService.test.js (7.468 s)
  weather Service
    initialization
      Î“ÃªÃœ should initialize with correct base URLs (95 ms)
      Î“ÃªÃœ should check if API key is configured (2 ms)
    data formatting
      Î“ÃªÃœ should format current weather data correctly (75 ms)
      Î“ÃªÃœ should format forecast data correctly (5 ms)
    error handling
      Î“ÃªÃœ should handle missing city gracefully (2 ms)
      Î“ÃªÃœ should handle invalid coordinates (1 ms)
    main functionality
      Î“ÃªÃœ should support metric and imperial units (1 ms)
      Î“ÃªÃœ should provide voice-friendly responses (1 ms)

(node:4016) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/unit/newsService.cached.test.js (7.405 s)
  news.cached Service
    initialization
      Î“ÃªÃœ should initialize correctly (100 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (4 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (2 ms)

(node:2600) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/unit/translateService.test.js (7.647 s)
  TranslateService
    isConfigured
      Î“ÃªÃœ should return false when API key is missing (90 ms)
      â”œÃ¹ should return true when API key is present (9 ms)
    getLanguageName
      Î“ÃªÃœ should return correct language name for valid code (4 ms)
      â”œÃ¹ should return code itself for unknown language (11 ms)
    getCommonLanguages
      Î“ÃªÃœ should return array of common languages (5 ms)
      Î“ÃªÃœ should include English in common languages (3 ms)
    getFallbackUrl
      â”œÃ¹ should generate correct fallback URL (7 ms)
      â”œÃ¹ should handle auto-detect source language (3 ms)
    translate
      Î“ÃªÃœ should return fallback when not configured (5 ms)
      â”œÃ¹ should handle empty text (4 ms)
      â”œÃ¹ should handle missing target language (2 ms)
    getSupportedLanguages
      â”œÃ¹ should return common languages when not configured (4 ms)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ isConfigured Î“Ã‡â•‘ should return true when API key is present

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      24 |       const result = translateService.isConfigured();
      25 |       
    > 26 |       expect(result).toBe(true);
         |                      ^
      27 |     });
      28 |   });
      29 |

      at Object.<anonymous> (tests/unit/translateService.test.js:26:22)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ getLanguageName Î“Ã‡â•‘ should return code itself for unknown language

    expect(received).toBe(expected) // Object.is equality

    Expected: "unknown"
    Received: "UNKNOWN"

      45 |     test('should return code itself for unknown language', () => {
      46 |       const result = translateService.getLanguageName('unknown');
    > 47 |       expect(result).toBe('unknown');
         |                      ^
      48 |     });
      49 |   });
      50 |

      at Object.<anonymous> (tests/unit/translateService.test.js:47:22)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL

    expect(received).toContain(expected) // indexOf

    Expected value:  "translate.google.com"
    Received object: {"message": "Opening Google Translate", "success": true, "url": "https://translate.google.com/?sl=auto&tl=es&text=Hello"}

      72 |       const url = translateService.getFallbackUrl('Hello', 'es', 'en');
      73 |       
    > 74 |       expect(url).toContain('translate.google.com');
         |                   ^
      75 |       expect(url).toContain('sl=en');
      76 |       expect(url).toContain('tl=es');
      77 |       expect(url).toContain('text=Hello');

      at Object.<anonymous> (tests/unit/translateService.test.js:74:19)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should handle auto-detect source language

    expect(received).toContain(expected) // indexOf

    Expected value:  "sl=auto"
    Received object: {"message": "Opening Google Translate", "success": true, "url": "https://translate.google.com/?sl=auto&tl=es&text=Hello"}

      81 |       const url = translateService.getFallbackUrl('Hello', 'es');
      82 |       
    > 83 |       expect(url).toContain('sl=auto');
         |                   ^
      84 |     });
      85 |   });
      86 |

      at Object.<anonymous> (tests/unit/translateService.test.js:83:19)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ translate Î“Ã‡â•‘ should handle empty text

    expect(received).toBeDefined()

    Received: undefined

      102 |       
      103 |       expect(result.success).toBe(false);
    > 104 |       expect(result.error).toBeDefined();
          |                            ^
      105 |     });
      106 |
      107 |     test('should handle missing target language', async () => {

      at Object.<anonymous> (tests/unit/translateService.test.js:104:28)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ translate Î“Ã‡â•‘ should handle missing target language

    expect(received).toBeDefined()

    Received: undefined

      111 |       
      112 |       expect(result.success).toBe(false);
    > 113 |       expect(result.error).toBeDefined();
          |                            ^
      114 |     });
      115 |   });
      116 |

      at Object.<anonymous> (tests/unit/translateService.test.js:113:28)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ getSupportedLanguages Î“Ã‡â•‘ should return common languages when not configured

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      121 |       const result = await translateService.getSupportedLanguages();
      122 |       
    > 123 |       expect(result.success).toBe(true);
          |                              ^
      124 |       expect(Array.isArray(result.languages)).toBe(true);
      125 |       expect(result.languages.length).toBe(20); // Common languages count
      126 |     });

      at Object.<anonymous> (tests/unit/translateService.test.js:123:30)

(node:16560) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/unit/spotifyService.test.js (7.635 s)
  SpotifyService
    isConfigured
      Î“ÃªÃœ should return false when credentials are missing (96 ms)
      â”œÃ¹ should return true when credentials are present (13 ms)
    getAuthUrl
      â”œÃ¹ should generate auth URL with correct parameters (2 ms)
      â”œÃ¹ should return fallback when not configured (7 ms)
    searchTrack
      Î“ÃªÃœ should return fallback when not configured (3 ms)
      â”œÃ¹ should handle empty query (2 ms)
    getFallbackUrl
      â”œÃ¹ should generate correct fallback URL for search (4 ms)
      â”œÃ¹ should generate correct fallback URL for play (2 ms)
      â”œÃ¹ should handle missing query parameter (2 ms)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ isConfigured Î“Ã‡â•‘ should return true when credentials are present

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      29 |       const result = spotifyService.isConfigured();
      30 |       
    > 31 |       expect(result).toBe(true);
         |                      ^
      32 |     });
      33 |   });
      34 |

      at Object.<anonymous> (tests/unit/spotifyService.test.js:31:22)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ getAuthUrl Î“Ã‡â•‘ should generate auth URL with correct parameters

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      40 |       const result = spotifyService.getAuthUrl();
      41 |       
    > 42 |       expect(result.success).toBe(true);
         |                              ^
      43 |       expect(result.authUrl).toContain('accounts.spotify.com/authorize');
      44 |       expect(result.authUrl).toContain('test-client-id');
      45 |       expect(result.authUrl).toContain('response_type=code');

      at Object.<anonymous> (tests/unit/spotifyService.test.js:42:30)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ getAuthUrl Î“Ã‡â•‘ should return fallback when not configured

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

      52 |       
      53 |       expect(result.success).toBe(false);
    > 54 |       expect(result.fallbackUrl).toContain('spotify.com');
         |                                  ^
      55 |     });
      56 |   });
      57 |

      at Object.<anonymous> (tests/unit/spotifyService.test.js:54:34)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ searchTrack Î“Ã‡â•‘ should handle empty query

    expect(received).toBeDefined()

    Received: undefined

      73 |       
      74 |       expect(result.success).toBe(false);
    > 75 |       expect(result.error).toBeDefined();
         |                            ^
      76 |     });
      77 |   });
      78 |

      at Object.<anonymous> (tests/unit/spotifyService.test.js:75:28)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL for search

    expect(received).toContain(expected) // indexOf

    Expected value:  "open.spotify.com/search"
    Received object: {"message": "Opening Spotify web player", "success": true, "url": "https://open.spotify.com/search/search"}

      81 |       const url = spotifyService.getFallbackUrl('search', 'test song');
      82 |       
    > 83 |       expect(url).toContain('open.spotify.com/search');
         |                   ^
      84 |       expect(url).toContain('test%20song');
      85 |     });
      86 |

      at Object.<anonymous> (tests/unit/spotifyService.test.js:83:19)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL for play

    expect(received).toContain(expected) // indexOf

    Expected value:  "open.spotify.com/search"
    Received object: {"message": "Opening Spotify web player", "success": true, "url": "https://open.spotify.com/search/play"}

      88 |       const url = spotifyService.getFallbackUrl('play', 'album name');
      89 |       
    > 90 |       expect(url).toContain('open.spotify.com/search');
         |                   ^
      91 |     });
      92 |
      93 |     test('should handle missing query parameter', () => {

      at Object.<anonymous> (tests/unit/spotifyService.test.js:90:19)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should handle missing query parameter

    expect(received).toContain(expected) // indexOf

    Expected value:  "open.spotify.com"
    Received object: {"message": "Opening Spotify web player", "success": true, "url": "https://open.spotify.com/search/search"}

      94 |       const url = spotifyService.getFallbackUrl('search');
      95 |       
    > 96 |       expect(url).toContain('open.spotify.com');
         |                   ^
      97 |     });
      98 |   });
      99 | });

      at Object.<anonymous> (tests/unit/spotifyService.test.js:96:19)

  console.log
    Axios: {
      get: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      },
      post: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      },
      put: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      },
      delete: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      },
      create: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      },
      interceptors: {
        request: { use: [Function], eject: [Function] },
        response: { use: [Function], eject: [Function] }
      },
      defaults: { headers: { common: {} } }
    }

      at Object.<anonymous> (tests/unit/debug.test.js:6:17)

(node:15012) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/unit/debug.test.js (7.918 s)
  Debug Mocks
    Î“ÃªÃœ should have mocked axios (683 ms)

  console.info
    [SEARCH-SERVICE] Searching for: test

      at SearchService.search (services/searchService.js:21:15)

(node:15540) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
  console.info
    [SEARCH-SERVICE] Searching for: what is nodejs

      at SearchService.search (services/searchService.js:21:15)

PASS tests/unit/searchService.test.js (8.086 s)
  search Service
    initialization
      Î“ÃªÃœ should initialize with correct base URL (93 ms)
      Î“ÃªÃœ should check if API is configured (4 ms)
    fallback functionality
      Î“ÃªÃœ should provide fallback web search URL (5 ms)
      Î“ÃªÃœ should provide fallback image search URL (6 ms)
      Î“ÃªÃœ should provide fallback news search URL (4 ms)
    data formatting
      Î“ÃªÃœ should format search results correctly (4 ms)
      Î“ÃªÃœ should format image results correctly (3 ms)
      Î“ÃªÃœ should handle empty search results (2 ms)
    error handling
      Î“ÃªÃœ should return fallback on search error (622 ms)
    quick answer feature
      Î“ÃªÃœ should provide quick answer structure (17 ms)

(node:9196) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/unit/youtubeService.test.js (8.035 s)
  YoutubeService
    isConfigured
      Î“ÃªÃœ should return false when API key is missing (114 ms)
      â”œÃ¹ should return true when API key is present (10 ms)
    parseDuration
      â”œÃ¹ should parse ISO 8601 duration correctly (12 ms)
      â”œÃ¹ should handle invalid duration format (3 ms)
    formatViewCount
      Î“ÃªÃœ should format view counts correctly (7 ms)
      Î“ÃªÃœ should handle zero views (4 ms)
    formatNumber
      â”œÃ¹ should format numbers with commas (71 ms)
    getFallbackUrl
      â”œÃ¹ should generate correct fallback URL for search (10 ms)
      â”œÃ¹ should generate correct fallback URL for watch (3 ms)
      â”œÃ¹ should handle missing query parameter (6 ms)
    searchVideos
      Î“ÃªÃœ should return fallback when not configured (9 ms)
      â”œÃ¹ should handle empty query (3 ms)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ isConfigured Î“Ã‡â•‘ should return true when API key is present

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      24 |       const result = youtubeService.isConfigured();
      25 |       
    > 26 |       expect(result).toBe(true);
         |                      ^
      27 |     });
      28 |   });
      29 |

      at Object.<anonymous> (tests/unit/youtubeService.test.js:26:22)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ parseDuration Î“Ã‡â•‘ should parse ISO 8601 duration correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: "1:02:03"
    Received: {"formatted": "1:02:03", "hours": 1, "minutes": 2, "seconds": 3, "totalSeconds": 3723}

      40 |       testCases.forEach(({ input, expected }) => {
      41 |         const result = youtubeService.parseDuration(input);
    > 42 |         expect(result).toBe(expected);
         |                        ^
      43 |       });
      44 |     });
      45 |

      at tests/unit/youtubeService.test.js:42:24
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/unit/youtubeService.test.js:40:17)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ parseDuration Î“Ã‡â•‘ should handle invalid duration format

    TypeError: Cannot read properties of null (reading '1')

      317 |     const match = isoDuration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
      318 |     
    > 319 |     const hours = (match[1] || '0H').replace('H', '');
          |                         ^
      320 |     const minutes = (match[2] || '0M').replace('M', '');
      321 |     const seconds = (match[3] || '0S').replace('S', '');
      322 |     

      at YouTubeService.parseDuration (services/youtubeService.js:319:25)
      at Object.<anonymous> (tests/unit/youtubeService.test.js:47:37)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ formatNumber Î“Ã‡â•‘ should format numbers with commas

    expect(received).toBe(expected) // Object.is equality

    Expected: "1,234,567"
    Received: "12,34,567"

      81 |       testCases.forEach(({ input, expected }) => {
      82 |         const result = youtubeService.formatNumber(input);
    > 83 |         expect(result).toBe(expected);
         |                        ^
      84 |       });
      85 |     });
      86 |   });

      at tests/unit/youtubeService.test.js:83:24
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/unit/youtubeService.test.js:81:17)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL for search

    expect(received).toContain(expected) // indexOf

    Expected value:  "youtube.com/results"
    Received object: {"message": "Opening YouTube search", "success": true, "url": "https://www.youtube.com/results?search_query=search"}

      90 |       const url = youtubeService.getFallbackUrl('search', 'test video');
      91 |       
    > 92 |       expect(url).toContain('youtube.com/results');
         |                   ^
      93 |       expect(url).toContain('search_query=test+video');
      94 |     });
      95 |

      at Object.<anonymous> (tests/unit/youtubeService.test.js:92:19)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL for watch

    expect(received).toContain(expected) // indexOf

    Expected value:  "youtube.com/watch"
    Received object: {"message": "Opening YouTube search", "success": true, "url": "https://www.youtube.com/results?search_query=watch"}

       97 |       const url = youtubeService.getFallbackUrl('watch', 'dQw4w9WgXcQ');
       98 |       
    >  99 |       expect(url).toContain('youtube.com/watch');
          |                   ^
      100 |       expect(url).toContain('v=dQw4w9WgXcQ');
      101 |     });
      102 |

      at Object.<anonymous> (tests/unit/youtubeService.test.js:99:19)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should handle missing query parameter

    expect(received).toBe(expected) // Object.is equality

    Expected: "https://www.youtube.com"
    Received: {"message": "Opening YouTube search", "success": true, "url": "https://www.youtube.com/results?search_query=home"}

      104 |       const url = youtubeService.getFallbackUrl('home');
      105 |       
    > 106 |       expect(url).toBe('https://www.youtube.com');
          |                   ^
      107 |     });
      108 |   });
      109 |

      at Object.<anonymous> (tests/unit/youtubeService.test.js:106:19)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ searchVideos Î“Ã‡â•‘ should handle empty query

    expect(received).toBeDefined()

    Received: undefined

      125 |       
      126 |       expect(result.success).toBe(false);
    > 127 |       expect(result.error).toBeDefined();
          |                            ^
      128 |     });
      129 |   });
      130 | });

      at Object.<anonymous> (tests/unit/youtubeService.test.js:127:28)

PASS tests/unit/conversationService.test.js
  conversation Service
    initialization
      Î“ÃªÃœ should initialize correctly (8 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (5 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (3 ms)

PASS tests/unit/reminderService.test.js
  reminder Service
    initialization
      Î“ÃªÃœ should initialize correctly (10 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (3 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (2 ms)

PASS tests/unit/weatherService.cached.test.js
  weather.cached Service
    initialization
      Î“ÃªÃœ should initialize correctly (18 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (6 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (6 ms)

PASS tests/unit/deviceManager.test.js
  deviceManager Service
    device control operations
      Î“ÃªÃœ should support bluetooth device control (21 ms)
      Î“ÃªÃœ should handle device connection (3 ms)
      Î“ÃªÃœ should support multiple device types (3 ms)
    error handling
      Î“ÃªÃœ should handle connection errors (43 ms)
      Î“ÃªÃœ should handle timeout errors (2 ms)
    device capabilities
      Î“ÃªÃœ should validate device actions (2 ms)
      Î“ÃªÃœ should validate chromecast actions (1 ms)

PASS tests/unit/gmailService.test.js
  gmail Service
    initialization
      Î“ÃªÃœ should initialize correctly (11 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (2 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (2 ms)

PASS tests/unit/calendarService.test.js
  calendar Service
    initialization
      Î“ÃªÃœ should initialize correctly (8 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (2 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (4 ms)

PASS tests/unit/newsService.test.js
  news Service
    initialization
      Î“ÃªÃœ should initialize correctly (11 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (2 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (2 ms)

PASS tests/unit/notesService.test.js
  notes Service
    initialization
      Î“ÃªÃœ should initialize correctly (10 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (23 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (2 ms)

FAIL tests/unit/security.test.js
  Î“Ã¹Ã… Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/integration/spotify.test.js
  Î“Ã¹Ã… Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/integration/music.test.js
  Î“Ã¹Ã… Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

(node:10716) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:18036) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:5412) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

FAIL tests/integration/youtube.routes.test.js (18.333 s)
  YouTube Routes
    POST /api/youtube/search
      â”œÃ¹ should return 400 for empty query (478 ms)
      â”œÃ¹ should return search results or fallback (41 ms)
      â”œÃ¹ should use default maxResults when not provided (31 ms)
    POST /api/youtube/video/:videoId
      â”œÃ¹ should return video details or fallback (41 ms)
      Î“ÃªÃœ should handle invalid video ID format (33 ms)
    POST /api/youtube/channel/search
      â”œÃ¹ should return 400 for empty query (28 ms)
      â”œÃ¹ should return channel search results (46 ms)
    POST /api/youtube/channel/:channelId
      â”œÃ¹ should return channel info or fallback (42 ms)
    POST /api/youtube/trending
      â”œÃ¹ should return trending videos (88 ms)
      â”œÃ¹ should use default maxResults when not provided (50 ms)
      â”œÃ¹ should handle regionCode parameter (33 ms)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      18 |         .post('/api/youtube/search')
      19 |         .send({ query: '' })
    > 20 |         .expect('Content-Type', /json/);
         |          ^
      21 |       
      22 |       expect(response.status).toBe(400);
      23 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:20:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should return search results or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      28 |         .post('/api/youtube/search')
      29 |         .send({ query: 'test video', maxResults: 5 })
    > 30 |         .expect('Content-Type', /json/);
         |          ^
      31 |       
      32 |       expect(response.status).toBe(200);
      33 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:30:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should use default maxResults when not provided

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      38 |         .post('/api/youtube/search')
      39 |         .send({ query: 'test video' })
    > 40 |         .expect('Content-Type', /json/);
         |          ^
      41 |       
      42 |       expect(response.status).toBe(200);
      43 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:40:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/video/:videoId Î“Ã‡â•‘ should return video details or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      49 |       const response = await request(app)
      50 |         .post('/api/youtube/video/dQw4w9WgXcQ')
    > 51 |         .expect('Content-Type', /json/);
         |          ^
      52 |       
      53 |       expect(response.status).toBe(200);
      54 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:51:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      67 |         .post('/api/youtube/channel/search')
      68 |         .send({ query: '' })
    > 69 |         .expect('Content-Type', /json/);
         |          ^
      70 |       
      71 |       expect(response.status).toBe(400);
      72 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:69:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/search Î“Ã‡â•‘ should return channel search results

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      77 |         .post('/api/youtube/channel/search')
      78 |         .send({ query: 'test channel', maxResults: 5 })
    > 79 |         .expect('Content-Type', /json/);
         |          ^
      80 |       
      81 |       expect(response.status).toBe(200);
      82 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:79:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/:channelId Î“Ã‡â•‘ should return channel info or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      88 |       const response = await request(app)
      89 |         .post('/api/youtube/channel/UCtest123')
    > 90 |         .expect('Content-Type', /json/);
         |          ^
      91 |       
      92 |       expect(response.status).toBe(200);
      93 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:90:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should return trending videos

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      100 |         .post('/api/youtube/trending')
      101 |         .send({ maxResults: 10 })
    > 102 |         .expect('Content-Type', /json/);
          |          ^
      103 |       
      104 |       expect(response.status).toBe(200);
      105 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:102:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should use default maxResults when not provided

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      110 |         .post('/api/youtube/trending')
      111 |         .send({})
    > 112 |         .expect('Content-Type', /json/);
          |          ^
      113 |       
      114 |       expect(response.status).toBe(200);
      115 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:112:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should handle regionCode parameter

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      120 |         .post('/api/youtube/trending')
      121 |         .send({ regionCode: 'US', maxResults: 5 })
    > 122 |         .expect('Content-Type', /json/);
          |          ^
      123 |       
      124 |       expect(response.status).toBe(200);
      125 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:122:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:122:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:113:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:113:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:122:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:113:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:113:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:122:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

FAIL tests/integration/translate.routes.test.js (18.776 s)
  Translate Routes
    POST /api/translate
      â”œÃ¹ should return 400 for empty text (1203 ms)
      â”œÃ¹ should return 400 for missing target language (67 ms)
      â”œÃ¹ should return translation or fallback (81 ms)
      â”œÃ¹ should handle auto-detect source language (169 ms)
    POST /api/translate/detect
      â”œÃ¹ should return 400 for empty text (94 ms)
      â”œÃ¹ should detect language (48 ms)
    GET /api/translate/languages
      â”œÃ¹ should return list of supported languages (124 ms)
      â”œÃ¹ should return languages with code and name (85 ms)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return 400 for empty text

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      20 |         .expect('Content-Type', /json/);
      21 |       
    > 22 |       expect(response.status).toBe(400);
         |                               ^
      23 |       expect(response.body).toHaveProperty('error');
      24 |     });
      25 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:22:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return 400 for missing target language

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      30 |         .expect('Content-Type', /json/);
      31 |       
    > 32 |       expect(response.status).toBe(400);
         |                               ^
      33 |       expect(response.body).toHaveProperty('error');
      34 |     });
      35 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:32:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return translation or fallback

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      44 |         .expect('Content-Type', /json/);
      45 |       
    > 46 |       expect(response.status).toBe(200);
         |                               ^
      47 |       expect(response.body).toHaveProperty('success');
      48 |     });
      49 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:46:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should handle auto-detect source language

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      57 |         .expect('Content-Type', /json/);
      58 |       
    > 59 |       expect(response.status).toBe(200);
         |                               ^
      60 |       expect(response.body).toHaveProperty('success');
      61 |     });
      62 |   });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:59:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate/detect Î“Ã‡â•‘ should return 400 for empty text

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      69 |         .expect('Content-Type', /json/);
      70 |       
    > 71 |       expect(response.status).toBe(400);
         |                               ^
      72 |       expect(response.body).toHaveProperty('error');
      73 |     });
      74 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:71:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate/detect Î“Ã‡â•‘ should detect language

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      79 |         .expect('Content-Type', /json/);
      80 |       
    > 81 |       expect(response.status).toBe(200);
         |                               ^
      82 |       expect(response.body).toHaveProperty('success');
      83 |     });
      84 |   });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:81:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ GET /api/translate/languages Î“Ã‡â•‘ should return list of supported languages

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      90 |         .expect('Content-Type', /json/);
      91 |       
    > 92 |       expect(response.status).toBe(200);
         |                               ^
      93 |       expect(response.body).toHaveProperty('success');
      94 |       expect(response.body).toHaveProperty('languages');
      95 |       expect(Array.isArray(response.body.languages)).toBe(true);

      at Object.<anonymous> (tests/integration/translate.routes.test.js:92:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ GET /api/translate/languages Î“Ã‡â•‘ should return languages with code and name

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      102 |         .expect('Content-Type', /json/);
      103 |       
    > 104 |       expect(response.status).toBe(200);
          |                               ^
      105 |       expect(response.body.languages[0]).toHaveProperty('code');
      106 |       expect(response.body.languages[0]).toHaveProperty('name');
      107 |     });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:104:31)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:113:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:113:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

FAIL tests/integration/music.routes.test.js (19.446 s)
  Music Routes
    GET /api/music/auth
      â”œÃ¹ should return auth URL or fallback (325 ms)
    POST /api/music/search
      â”œÃ¹ should return 400 for empty query (205 ms)
      â”œÃ¹ should return search results or fallback (34 ms)
    POST /api/music/play
      â”œÃ¹ should return 400 for missing uri (838 ms)
      â”œÃ¹ should handle play request (128 ms)
    POST /api/music/pause
      â”œÃ¹ should handle pause request (203 ms)
    POST /api/music/next
      â”œÃ¹ should handle next track request (115 ms)
    POST /api/music/previous
      â”œÃ¹ should handle previous track request (46 ms)
    POST /api/music/volume
      â”œÃ¹ should return 400 for missing volume (59 ms)
      â”œÃ¹ should return 400 for invalid volume (67 ms)
      â”œÃ¹ should handle valid volume request (43 ms)
    GET /api/music/current
      â”œÃ¹ should return current playback info (43 ms)
    GET /api/music/devices
      â”œÃ¹ should return available devices (23 ms)
    POST /api/music/device
      â”œÃ¹ should return 400 for missing deviceId (34 ms)
      â”œÃ¹ should handle device change request (40 ms)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/auth Î“Ã‡â•‘ should return auth URL or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      17 |       const response = await request(app)
      18 |         .get('/api/music/auth')
    > 19 |         .expect('Content-Type', /json/);
         |          ^
      20 |       
      21 |       expect(response.status).toBe(200);
      22 |       expect(response.body).toHaveProperty('url');

      at Object.<anonymous> (tests/integration/music.routes.test.js:19:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      30 |         .post('/api/music/search')
      31 |         .send({ query: '' })
    > 32 |         .expect('Content-Type', /json/);
         |          ^
      33 |       
      34 |       expect(response.status).toBe(400);
      35 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/music.routes.test.js:32:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/search Î“Ã‡â•‘ should return search results or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      40 |         .post('/api/music/search')
      41 |         .send({ query: 'test song', limit: 5 })
    > 42 |         .expect('Content-Type', /json/);
         |          ^
      43 |       
      44 |       expect(response.status).toBe(200);
      45 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:42:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/play Î“Ã‡â•‘ should return 400 for missing uri

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      54 |         .expect('Content-Type', /json/);
      55 |       
    > 56 |       expect(response.status).toBe(400);
         |                               ^
      57 |       expect(response.body).toHaveProperty('error');
      58 |     });
      59 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:56:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/play Î“Ã‡â•‘ should handle play request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      64 |         .expect('Content-Type', /json/);
      65 |       
    > 66 |       expect(response.status).toBe(200);
         |                               ^
      67 |       expect(response.body).toHaveProperty('success');
      68 |     });
      69 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:66:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/pause Î“Ã‡â•‘ should handle pause request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      75 |         .expect('Content-Type', /json/);
      76 |       
    > 77 |       expect(response.status).toBe(200);
         |                               ^
      78 |       expect(response.body).toHaveProperty('success');
      79 |     });
      80 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:77:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/next Î“Ã‡â•‘ should handle next track request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      86 |         .expect('Content-Type', /json/);
      87 |       
    > 88 |       expect(response.status).toBe(200);
         |                               ^
      89 |       expect(response.body).toHaveProperty('success');
      90 |     });
      91 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:88:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/previous Î“Ã‡â•‘ should handle previous track request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

       97 |         .expect('Content-Type', /json/);
       98 |       
    >  99 |       expect(response.status).toBe(200);
          |                               ^
      100 |       expect(response.body).toHaveProperty('success');
      101 |     });
      102 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:99:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should return 400 for missing volume

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      109 |         .expect('Content-Type', /json/);
      110 |       
    > 111 |       expect(response.status).toBe(400);
          |                               ^
      112 |       expect(response.body).toHaveProperty('error');
      113 |     });
      114 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:111:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should return 400 for invalid volume

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      119 |         .expect('Content-Type', /json/);
      120 |       
    > 121 |       expect(response.status).toBe(400);
          |                               ^
      122 |       expect(response.body.error).toContain('0-100');
      123 |     });
      124 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:121:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should handle valid volume request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      129 |         .expect('Content-Type', /json/);
      130 |       
    > 131 |       expect(response.status).toBe(200);
          |                               ^
      132 |       expect(response.body).toHaveProperty('success');
      133 |     });
      134 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:131:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/current Î“Ã‡â•‘ should return current playback info

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      140 |         .expect('Content-Type', /json/);
      141 |       
    > 142 |       expect(response.status).toBe(200);
          |                               ^
      143 |       expect(response.body).toHaveProperty('success');
      144 |     });
      145 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:142:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/devices Î“Ã‡â•‘ should return available devices

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      149 |       const response = await request(app)
      150 |         .get('/api/music/devices')
    > 151 |         .expect('Content-Type', /json/);
          |          ^
      152 |       
      153 |       expect(response.status).toBe(200);
      154 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:151:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/device Î“Ã‡â•‘ should return 400 for missing deviceId

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      161 |         .post('/api/music/device')
      162 |         .send({})
    > 163 |         .expect('Content-Type', /json/);
          |          ^
      164 |       
      165 |       expect(response.status).toBe(400);
      166 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/music.routes.test.js:163:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/device Î“Ã‡â•‘ should handle device change request

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      171 |         .post('/api/music/device')
      172 |         .send({ deviceId: 'test-device-123' })
    > 173 |         .expect('Content-Type', /json/);
          |          ^
      174 |       
      175 |       expect(response.status).toBe(200);
      176 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:173:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

FAIL tests/integration/wikipedia.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/user.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/weather.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/reminder.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/search.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/notes.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/news.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/device.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/calendar.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/gmail.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/auth.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

Summary of all failing tests
FAIL tests/unit/translateService.test.js (7.647 s)
  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ isConfigured Î“Ã‡â•‘ should return true when API key is present

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      24 |       const result = translateService.isConfigured();
      25 |       
    > 26 |       expect(result).toBe(true);
         |                      ^
      27 |     });
      28 |   });
      29 |

      at Object.<anonymous> (tests/unit/translateService.test.js:26:22)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ getLanguageName Î“Ã‡â•‘ should return code itself for unknown language

    expect(received).toBe(expected) // Object.is equality

    Expected: "unknown"
    Received: "UNKNOWN"

      45 |     test('should return code itself for unknown language', () => {
      46 |       const result = translateService.getLanguageName('unknown');
    > 47 |       expect(result).toBe('unknown');
         |                      ^
      48 |     });
      49 |   });
      50 |

      at Object.<anonymous> (tests/unit/translateService.test.js:47:22)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL

    expect(received).toContain(expected) // indexOf

    Expected value:  "translate.google.com"
    Received object: {"message": "Opening Google Translate", "success": true, "url": "https://translate.google.com/?sl=auto&tl=es&text=Hello"}

      72 |       const url = translateService.getFallbackUrl('Hello', 'es', 'en');
      73 |       
    > 74 |       expect(url).toContain('translate.google.com');
         |                   ^
      75 |       expect(url).toContain('sl=en');
      76 |       expect(url).toContain('tl=es');
      77 |       expect(url).toContain('text=Hello');

      at Object.<anonymous> (tests/unit/translateService.test.js:74:19)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should handle auto-detect source language

    expect(received).toContain(expected) // indexOf

    Expected value:  "sl=auto"
    Received object: {"message": "Opening Google Translate", "success": true, "url": "https://translate.google.com/?sl=auto&tl=es&text=Hello"}

      81 |       const url = translateService.getFallbackUrl('Hello', 'es');
      82 |       
    > 83 |       expect(url).toContain('sl=auto');
         |                   ^
      84 |     });
      85 |   });
      86 |

      at Object.<anonymous> (tests/unit/translateService.test.js:83:19)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ translate Î“Ã‡â•‘ should handle empty text

    expect(received).toBeDefined()

    Received: undefined

      102 |       
      103 |       expect(result.success).toBe(false);
    > 104 |       expect(result.error).toBeDefined();
          |                            ^
      105 |     });
      106 |
      107 |     test('should handle missing target language', async () => {

      at Object.<anonymous> (tests/unit/translateService.test.js:104:28)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ translate Î“Ã‡â•‘ should handle missing target language

    expect(received).toBeDefined()

    Received: undefined

      111 |       
      112 |       expect(result.success).toBe(false);
    > 113 |       expect(result.error).toBeDefined();
          |                            ^
      114 |     });
      115 |   });
      116 |

      at Object.<anonymous> (tests/unit/translateService.test.js:113:28)

  Î“Ã¹Ã… TranslateService Î“Ã‡â•‘ getSupportedLanguages Î“Ã‡â•‘ should return common languages when not configured

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      121 |       const result = await translateService.getSupportedLanguages();
      122 |       
    > 123 |       expect(result.success).toBe(true);
          |                              ^
      124 |       expect(Array.isArray(result.languages)).toBe(true);
      125 |       expect(result.languages.length).toBe(20); // Common languages count
      126 |     });

      at Object.<anonymous> (tests/unit/translateService.test.js:123:30)

FAIL tests/unit/spotifyService.test.js (7.635 s)
  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ isConfigured Î“Ã‡â•‘ should return true when credentials are present

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      29 |       const result = spotifyService.isConfigured();
      30 |       
    > 31 |       expect(result).toBe(true);
         |                      ^
      32 |     });
      33 |   });
      34 |

      at Object.<anonymous> (tests/unit/spotifyService.test.js:31:22)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ getAuthUrl Î“Ã‡â•‘ should generate auth URL with correct parameters

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      40 |       const result = spotifyService.getAuthUrl();
      41 |       
    > 42 |       expect(result.success).toBe(true);
         |                              ^
      43 |       expect(result.authUrl).toContain('accounts.spotify.com/authorize');
      44 |       expect(result.authUrl).toContain('test-client-id');
      45 |       expect(result.authUrl).toContain('response_type=code');

      at Object.<anonymous> (tests/unit/spotifyService.test.js:42:30)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ getAuthUrl Î“Ã‡â•‘ should return fallback when not configured

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

      52 |       
      53 |       expect(result.success).toBe(false);
    > 54 |       expect(result.fallbackUrl).toContain('spotify.com');
         |                                  ^
      55 |     });
      56 |   });
      57 |

      at Object.<anonymous> (tests/unit/spotifyService.test.js:54:34)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ searchTrack Î“Ã‡â•‘ should handle empty query

    expect(received).toBeDefined()

    Received: undefined

      73 |       
      74 |       expect(result.success).toBe(false);
    > 75 |       expect(result.error).toBeDefined();
         |                            ^
      76 |     });
      77 |   });
      78 |

      at Object.<anonymous> (tests/unit/spotifyService.test.js:75:28)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL for search

    expect(received).toContain(expected) // indexOf

    Expected value:  "open.spotify.com/search"
    Received object: {"message": "Opening Spotify web player", "success": true, "url": "https://open.spotify.com/search/search"}

      81 |       const url = spotifyService.getFallbackUrl('search', 'test song');
      82 |       
    > 83 |       expect(url).toContain('open.spotify.com/search');
         |                   ^
      84 |       expect(url).toContain('test%20song');
      85 |     });
      86 |

      at Object.<anonymous> (tests/unit/spotifyService.test.js:83:19)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL for play

    expect(received).toContain(expected) // indexOf

    Expected value:  "open.spotify.com/search"
    Received object: {"message": "Opening Spotify web player", "success": true, "url": "https://open.spotify.com/search/play"}

      88 |       const url = spotifyService.getFallbackUrl('play', 'album name');
      89 |       
    > 90 |       expect(url).toContain('open.spotify.com/search');
         |                   ^
      91 |     });
      92 |
      93 |     test('should handle missing query parameter', () => {

      at Object.<anonymous> (tests/unit/spotifyService.test.js:90:19)

  Î“Ã¹Ã… SpotifyService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should handle missing query parameter

    expect(received).toContain(expected) // indexOf

    Expected value:  "open.spotify.com"
    Received object: {"message": "Opening Spotify web player", "success": true, "url": "https://open.spotify.com/search/search"}

      94 |       const url = spotifyService.getFallbackUrl('search');
      95 |       
    > 96 |       expect(url).toContain('open.spotify.com');
         |                   ^
      97 |     });
      98 |   });
      99 | });

      at Object.<anonymous> (tests/unit/spotifyService.test.js:96:19)

FAIL tests/unit/youtubeService.test.js (8.035 s)
  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ isConfigured Î“Ã‡â•‘ should return true when API key is present

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      24 |       const result = youtubeService.isConfigured();
      25 |       
    > 26 |       expect(result).toBe(true);
         |                      ^
      27 |     });
      28 |   });
      29 |

      at Object.<anonymous> (tests/unit/youtubeService.test.js:26:22)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ parseDuration Î“Ã‡â•‘ should parse ISO 8601 duration correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: "1:02:03"
    Received: {"formatted": "1:02:03", "hours": 1, "minutes": 2, "seconds": 3, "totalSeconds": 3723}

      40 |       testCases.forEach(({ input, expected }) => {
      41 |         const result = youtubeService.parseDuration(input);
    > 42 |         expect(result).toBe(expected);
         |                        ^
      43 |       });
      44 |     });
      45 |

      at tests/unit/youtubeService.test.js:42:24
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/unit/youtubeService.test.js:40:17)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ parseDuration Î“Ã‡â•‘ should handle invalid duration format

    TypeError: Cannot read properties of null (reading '1')

      317 |     const match = isoDuration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
      318 |     
    > 319 |     const hours = (match[1] || '0H').replace('H', '');
          |                         ^
      320 |     const minutes = (match[2] || '0M').replace('M', '');
      321 |     const seconds = (match[3] || '0S').replace('S', '');
      322 |     

      at YouTubeService.parseDuration (services/youtubeService.js:319:25)
      at Object.<anonymous> (tests/unit/youtubeService.test.js:47:37)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ formatNumber Î“Ã‡â•‘ should format numbers with commas

    expect(received).toBe(expected) // Object.is equality

    Expected: "1,234,567"
    Received: "12,34,567"

      81 |       testCases.forEach(({ input, expected }) => {
      82 |         const result = youtubeService.formatNumber(input);
    > 83 |         expect(result).toBe(expected);
         |                        ^
      84 |       });
      85 |     });
      86 |   });

      at tests/unit/youtubeService.test.js:83:24
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/unit/youtubeService.test.js:81:17)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL for search

    expect(received).toContain(expected) // indexOf

    Expected value:  "youtube.com/results"
    Received object: {"message": "Opening YouTube search", "success": true, "url": "https://www.youtube.com/results?search_query=search"}

      90 |       const url = youtubeService.getFallbackUrl('search', 'test video');
      91 |       
    > 92 |       expect(url).toContain('youtube.com/results');
         |                   ^
      93 |       expect(url).toContain('search_query=test+video');
      94 |     });
      95 |

      at Object.<anonymous> (tests/unit/youtubeService.test.js:92:19)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL for watch

    expect(received).toContain(expected) // indexOf

    Expected value:  "youtube.com/watch"
    Received object: {"message": "Opening YouTube search", "success": true, "url": "https://www.youtube.com/results?search_query=watch"}

       97 |       const url = youtubeService.getFallbackUrl('watch', 'dQw4w9WgXcQ');
       98 |       
    >  99 |       expect(url).toContain('youtube.com/watch');
          |                   ^
      100 |       expect(url).toContain('v=dQw4w9WgXcQ');
      101 |     });
      102 |

      at Object.<anonymous> (tests/unit/youtubeService.test.js:99:19)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should handle missing query parameter

    expect(received).toBe(expected) // Object.is equality

    Expected: "https://www.youtube.com"
    Received: {"message": "Opening YouTube search", "success": true, "url": "https://www.youtube.com/results?search_query=home"}

      104 |       const url = youtubeService.getFallbackUrl('home');
      105 |       
    > 106 |       expect(url).toBe('https://www.youtube.com');
          |                   ^
      107 |     });
      108 |   });
      109 |

      at Object.<anonymous> (tests/unit/youtubeService.test.js:106:19)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ searchVideos Î“Ã‡â•‘ should handle empty query

    expect(received).toBeDefined()

    Received: undefined

      125 |       
      126 |       expect(result.success).toBe(false);
    > 127 |       expect(result.error).toBeDefined();
          |                            ^
      128 |     });
      129 |   });
      130 | });

      at Object.<anonymous> (tests/unit/youtubeService.test.js:127:28)

FAIL tests/unit/security.test.js
  Î“Ã¹Ã… Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/integration/spotify.test.js
  Î“Ã¹Ã… Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/integration/music.test.js
  Î“Ã¹Ã… Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/integration/youtube.routes.test.js (18.333 s)
  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      18 |         .post('/api/youtube/search')
      19 |         .send({ query: '' })
    > 20 |         .expect('Content-Type', /json/);
         |          ^
      21 |       
      22 |       expect(response.status).toBe(400);
      23 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:20:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should return search results or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      28 |         .post('/api/youtube/search')
      29 |         .send({ query: 'test video', maxResults: 5 })
    > 30 |         .expect('Content-Type', /json/);
         |          ^
      31 |       
      32 |       expect(response.status).toBe(200);
      33 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:30:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should use default maxResults when not provided

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      38 |         .post('/api/youtube/search')
      39 |         .send({ query: 'test video' })
    > 40 |         .expect('Content-Type', /json/);
         |          ^
      41 |       
      42 |       expect(response.status).toBe(200);
      43 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:40:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/video/:videoId Î“Ã‡â•‘ should return video details or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      49 |       const response = await request(app)
      50 |         .post('/api/youtube/video/dQw4w9WgXcQ')
    > 51 |         .expect('Content-Type', /json/);
         |          ^
      52 |       
      53 |       expect(response.status).toBe(200);
      54 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:51:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      67 |         .post('/api/youtube/channel/search')
      68 |         .send({ query: '' })
    > 69 |         .expect('Content-Type', /json/);
         |          ^
      70 |       
      71 |       expect(response.status).toBe(400);
      72 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:69:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/search Î“Ã‡â•‘ should return channel search results

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      77 |         .post('/api/youtube/channel/search')
      78 |         .send({ query: 'test channel', maxResults: 5 })
    > 79 |         .expect('Content-Type', /json/);
         |          ^
      80 |       
      81 |       expect(response.status).toBe(200);
      82 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:79:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/:channelId Î“Ã‡â•‘ should return channel info or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      88 |       const response = await request(app)
      89 |         .post('/api/youtube/channel/UCtest123')
    > 90 |         .expect('Content-Type', /json/);
         |          ^
      91 |       
      92 |       expect(response.status).toBe(200);
      93 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:90:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should return trending videos

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      100 |         .post('/api/youtube/trending')
      101 |         .send({ maxResults: 10 })
    > 102 |         .expect('Content-Type', /json/);
          |          ^
      103 |       
      104 |       expect(response.status).toBe(200);
      105 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:102:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should use default maxResults when not provided

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      110 |         .post('/api/youtube/trending')
      111 |         .send({})
    > 112 |         .expect('Content-Type', /json/);
          |          ^
      113 |       
      114 |       expect(response.status).toBe(200);
      115 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:112:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should handle regionCode parameter

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      120 |         .post('/api/youtube/trending')
      121 |         .send({ regionCode: 'US', maxResults: 5 })
    > 122 |         .expect('Content-Type', /json/);
          |          ^
      123 |       
      124 |       expect(response.status).toBe(200);
      125 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:122:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

FAIL tests/integration/translate.routes.test.js (18.776 s)
  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return 400 for empty text

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      20 |         .expect('Content-Type', /json/);
      21 |       
    > 22 |       expect(response.status).toBe(400);
         |                               ^
      23 |       expect(response.body).toHaveProperty('error');
      24 |     });
      25 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:22:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return 400 for missing target language

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      30 |         .expect('Content-Type', /json/);
      31 |       
    > 32 |       expect(response.status).toBe(400);
         |                               ^
      33 |       expect(response.body).toHaveProperty('error');
      34 |     });
      35 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:32:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return translation or fallback

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      44 |         .expect('Content-Type', /json/);
      45 |       
    > 46 |       expect(response.status).toBe(200);
         |                               ^
      47 |       expect(response.body).toHaveProperty('success');
      48 |     });
      49 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:46:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should handle auto-detect source language

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      57 |         .expect('Content-Type', /json/);
      58 |       
    > 59 |       expect(response.status).toBe(200);
         |                               ^
      60 |       expect(response.body).toHaveProperty('success');
      61 |     });
      62 |   });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:59:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate/detect Î“Ã‡â•‘ should return 400 for empty text

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      69 |         .expect('Content-Type', /json/);
      70 |       
    > 71 |       expect(response.status).toBe(400);
         |                               ^
      72 |       expect(response.body).toHaveProperty('error');
      73 |     });
      74 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:71:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate/detect Î“Ã‡â•‘ should detect language

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      79 |         .expect('Content-Type', /json/);
      80 |       
    > 81 |       expect(response.status).toBe(200);
         |                               ^
      82 |       expect(response.body).toHaveProperty('success');
      83 |     });
      84 |   });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:81:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ GET /api/translate/languages Î“Ã‡â•‘ should return list of supported languages

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      90 |         .expect('Content-Type', /json/);
      91 |       
    > 92 |       expect(response.status).toBe(200);
         |                               ^
      93 |       expect(response.body).toHaveProperty('success');
      94 |       expect(response.body).toHaveProperty('languages');
      95 |       expect(Array.isArray(response.body.languages)).toBe(true);

      at Object.<anonymous> (tests/integration/translate.routes.test.js:92:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ GET /api/translate/languages Î“Ã‡â•‘ should return languages with code and name

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      102 |         .expect('Content-Type', /json/);
      103 |       
    > 104 |       expect(response.status).toBe(200);
          |                               ^
      105 |       expect(response.body.languages[0]).toHaveProperty('code');
      106 |       expect(response.body.languages[0]).toHaveProperty('name');
      107 |     });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:104:31)

FAIL tests/integration/music.routes.test.js (19.446 s)
  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/auth Î“Ã‡â•‘ should return auth URL or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      17 |       const response = await request(app)
      18 |         .get('/api/music/auth')
    > 19 |         .expect('Content-Type', /json/);
         |          ^
      20 |       
      21 |       expect(response.status).toBe(200);
      22 |       expect(response.body).toHaveProperty('url');

      at Object.<anonymous> (tests/integration/music.routes.test.js:19:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      30 |         .post('/api/music/search')
      31 |         .send({ query: '' })
    > 32 |         .expect('Content-Type', /json/);
         |          ^
      33 |       
      34 |       expect(response.status).toBe(400);
      35 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/music.routes.test.js:32:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/search Î“Ã‡â•‘ should return search results or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      40 |         .post('/api/music/search')
      41 |         .send({ query: 'test song', limit: 5 })
    > 42 |         .expect('Content-Type', /json/);
         |          ^
      43 |       
      44 |       expect(response.status).toBe(200);
      45 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:42:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/play Î“Ã‡â•‘ should return 400 for missing uri

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      54 |         .expect('Content-Type', /json/);
      55 |       
    > 56 |       expect(response.status).toBe(400);
         |                               ^
      57 |       expect(response.body).toHaveProperty('error');
      58 |     });
      59 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:56:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/play Î“Ã‡â•‘ should handle play request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      64 |         .expect('Content-Type', /json/);
      65 |       
    > 66 |       expect(response.status).toBe(200);
         |                               ^
      67 |       expect(response.body).toHaveProperty('success');
      68 |     });
      69 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:66:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/pause Î“Ã‡â•‘ should handle pause request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      75 |         .expect('Content-Type', /json/);
      76 |       
    > 77 |       expect(response.status).toBe(200);
         |                               ^
      78 |       expect(response.body).toHaveProperty('success');
      79 |     });
      80 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:77:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/next Î“Ã‡â•‘ should handle next track request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      86 |         .expect('Content-Type', /json/);
      87 |       
    > 88 |       expect(response.status).toBe(200);
         |                               ^
      89 |       expect(response.body).toHaveProperty('success');
      90 |     });
      91 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:88:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/previous Î“Ã‡â•‘ should handle previous track request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

       97 |         .expect('Content-Type', /json/);
       98 |       
    >  99 |       expect(response.status).toBe(200);
          |                               ^
      100 |       expect(response.body).toHaveProperty('success');
      101 |     });
      102 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:99:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should return 400 for missing volume

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      109 |         .expect('Content-Type', /json/);
      110 |       
    > 111 |       expect(response.status).toBe(400);
          |                               ^
      112 |       expect(response.body).toHaveProperty('error');
      113 |     });
      114 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:111:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should return 400 for invalid volume

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      119 |         .expect('Content-Type', /json/);
      120 |       
    > 121 |       expect(response.status).toBe(400);
          |                               ^
      122 |       expect(response.body.error).toContain('0-100');
      123 |     });
      124 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:121:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should handle valid volume request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      129 |         .expect('Content-Type', /json/);
      130 |       
    > 131 |       expect(response.status).toBe(200);
          |                               ^
      132 |       expect(response.body).toHaveProperty('success');
      133 |     });
      134 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:131:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/current Î“Ã‡â•‘ should return current playback info

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      140 |         .expect('Content-Type', /json/);
      141 |       
    > 142 |       expect(response.status).toBe(200);
          |                               ^
      143 |       expect(response.body).toHaveProperty('success');
      144 |     });
      145 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:142:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/devices Î“Ã‡â•‘ should return available devices

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      149 |       const response = await request(app)
      150 |         .get('/api/music/devices')
    > 151 |         .expect('Content-Type', /json/);
          |          ^
      152 |       
      153 |       expect(response.status).toBe(200);
      154 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:151:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/device Î“Ã‡â•‘ should return 400 for missing deviceId

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      161 |         .post('/api/music/device')
      162 |         .send({})
    > 163 |         .expect('Content-Type', /json/);
          |          ^
      164 |       
      165 |       expect(response.status).toBe(400);
      166 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/music.routes.test.js:163:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/device Î“Ã‡â•‘ should handle device change request

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      171 |         .post('/api/music/device')
      172 |         .send({ deviceId: 'test-device-123' })
    > 173 |         .expect('Content-Type', /json/);
          |          ^
      174 |       
      175 |       expect(response.status).toBe(200);
      176 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:173:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

FAIL tests/integration/wikipedia.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/user.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/weather.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/reminder.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/search.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/notes.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/news.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/device.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/calendar.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/gmail.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/auth.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)


Test Suites: 20 failed, 13 passed, 33 total
Tests:       55 failed, 65 passed, 120 total
Snapshots:   0 total
Time:        29.574 s
Ran all test suites.
