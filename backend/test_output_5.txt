FAIL tests/unit/spotifyService.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: Unexpected identifier 'spotifyService'

      at Runtime.loadEsmModule (node_modules/jest-runtime/build/index.js:516:20)

(node:17944) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:16652) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/unit/newsService.cached.test.js (8.995 s)
  news.cached Service
    initialization
      Î“ÃªÃœ should initialize correctly (117 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (3 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (3 ms)

  console.info
    [WEATHER-SERVICE] Fetching weather for: NonexistentCity12345

      at WeatherService.getCurrentWeather (services/weatherService.js:21:15)

  console.error
    [WEATHER-ERROR]: Cannot read properties of undefined (reading 'temp')

    [0m [90m 31 |[39m       [36mreturn[39m [36mthis[39m[33m.[39mformatCurrentWeather(response[33m.[39mdata)[33m;[39m
     [90m 32 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 33 |[39m       console[33m.[39merror([32m'[WEATHER-ERROR]:'[39m[33m,[39m error[33m.[39mresponse[33m?[39m[33m.[39mdata [33m||[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 34 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Unable to fetch weather for ${city}`[39m)[33m;[39m
     [90m 35 |[39m     }
     [90m 36 |[39m   }[0m

      at WeatherService.getCurrentWeather (services/weatherService.js:33:15)
      at Object.<anonymous> (tests/unit/weatherService.test.js:73:7)

  console.error
    [WEATHER-ERROR]: Cannot read properties of undefined (reading 'temp')

    [0m [90m 52 |[39m       [36mreturn[39m [36mthis[39m[33m.[39mformatCurrentWeather(response[33m.[39mdata)[33m;[39m
     [90m 53 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 54 |[39m       console[33m.[39merror([32m'[WEATHER-ERROR]:'[39m[33m,[39m error[33m.[39mresponse[33m?[39m[33m.[39mdata [33m||[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 55 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Unable to fetch weather for your location'[39m)[33m;[39m
     [90m 56 |[39m     }
     [90m 57 |[39m   }[0m

      at WeatherService.getWeatherByCoords (services/weatherService.js:54:15)
      at Object.<anonymous> (tests/unit/weatherService.test.js:83:7)

(node:9608) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/unit/weatherService.test.js (9.33 s)
  weather Service
    initialization
      Î“ÃªÃœ should initialize with correct base URLs (131 ms)
      Î“ÃªÃœ should check if API key is configured (2 ms)
    data formatting
      Î“ÃªÃœ should format current weather data correctly (91 ms)
      Î“ÃªÃœ should format forecast data correctly (9 ms)
    error handling
      Î“ÃªÃœ should handle missing city gracefully (649 ms)
      Î“ÃªÃœ should handle invalid coordinates (21 ms)
    main functionality
      Î“ÃªÃœ should support metric and imperial units (5 ms)
      Î“ÃªÃœ should provide voice-friendly responses (4 ms)

  console.log
    Axios: {
      get: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      },
      post: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      },
      put: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      },
      delete: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      },
      create: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      },
      interceptors: {
        request: { use: [Function], eject: [Function] },
        response: { use: [Function], eject: [Function] }
      },
      defaults: { headers: { common: {} } }
    }

      at Object.<anonymous> (tests/unit/debug.test.js:6:17)

(node:14048) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/unit/debug.test.js (9.37 s)
  Debug Mocks
    Î“ÃªÃœ should have mocked axios (779 ms)

  console.error
    [TRANSLATE-ERROR]: Cannot read properties of undefined (reading 'translations')

    [0m [90m 59 |[39m       }[33m;[39m
     [90m 60 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 61 |[39m       console[33m.[39merror([32m'[TRANSLATE-ERROR]:'[39m[33m,[39m error[33m.[39mresponse[33m?[39m[33m.[39mdata [33m||[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 62 |[39m
     [90m 63 |[39m       [90m// Check if API key is invalid[39m
     [90m 64 |[39m       [36mif[39m (error[33m.[39mresponse[33m?[39m[33m.[39mstatus [33m===[39m [35m400[39m [33m||[39m error[33m.[39mresponse[33m?[39m[33m.[39mstatus [33m===[39m [35m403[39m) {[0m

      at TranslateService.translate (services/translateService.js:61:15)
      at Object.<anonymous> (tests/unit/translateService.test.js:110:22)

  console.error
    [TRANSLATE-ERROR]: Cannot read properties of undefined (reading 'translations')

    [0m [90m 59 |[39m       }[33m;[39m
     [90m 60 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 61 |[39m       console[33m.[39merror([32m'[TRANSLATE-ERROR]:'[39m[33m,[39m error[33m.[39mresponse[33m?[39m[33m.[39mdata [33m||[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 62 |[39m
     [90m 63 |[39m       [90m// Check if API key is invalid[39m
     [90m 64 |[39m       [36mif[39m (error[33m.[39mresponse[33m?[39m[33m.[39mstatus [33m===[39m [35m400[39m [33m||[39m error[33m.[39mresponse[33m?[39m[33m.[39mstatus [33m===[39m [35m403[39m) {[0m

      at TranslateService.translate (services/translateService.js:61:15)
      at Object.<anonymous> (tests/unit/translateService.test.js:123:22)

(node:13304) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/unit/translateService.test.js (9.639 s)
  TranslateService
    isConfigured
      Î“ÃªÃœ should return false when API key is missing (137 ms)
      Î“ÃªÃœ should return true when API key is present (2 ms)
    getLanguageName
      Î“ÃªÃœ should return correct language name for valid code (9 ms)
      Î“ÃªÃœ should return code itself for unknown language (7 ms)
    getCommonLanguages
      Î“ÃªÃœ should return array of common languages (40 ms)
      Î“ÃªÃœ should include English in common languages (3 ms)
    getFallbackUrl
      Î“ÃªÃœ should generate correct fallback URL (5 ms)
      Î“ÃªÃœ should handle auto-detect source language (2 ms)
    translate
      Î“ÃªÃœ should return fallback when not configured (2 ms)
      Î“ÃªÃœ should handle empty text (754 ms)
      Î“ÃªÃœ should handle missing target language (30 ms)
    getSupportedLanguages
      Î“ÃªÃœ should return common languages when not configured (2 ms)

(node:6612) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/unit/wikipediaService.test.js (9.401 s)
  wikipedia Service
    initialization
      Î“ÃªÃœ should initialize correctly (209 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (4 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (94 ms)

  console.info
    [SEARCH-SERVICE] Searching for: test

      at SearchService.search (services/searchService.js:21:15)

  console.info
    [SEARCH-SERVICE] Searching for: what is nodejs

      at SearchService.search (services/searchService.js:21:15)

(node:18024) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/unit/searchService.test.js (9.686 s)
  search Service
    initialization
      Î“ÃªÃœ should initialize with correct base URL (168 ms)
      Î“ÃªÃœ should check if API is configured (3 ms)
    fallback functionality
      Î“ÃªÃœ should provide fallback web search URL (8 ms)
      Î“ÃªÃœ should provide fallback image search URL (4 ms)
      Î“ÃªÃœ should provide fallback news search URL (4 ms)
    data formatting
      Î“ÃªÃœ should format search results correctly (6 ms)
      Î“ÃªÃœ should format image results correctly (3 ms)
      Î“ÃªÃœ should handle empty search results (3 ms)
    error handling
      Î“ÃªÃœ should return fallback on search error (758 ms)
    quick answer feature
      Î“ÃªÃœ should provide quick answer structure (13 ms)

  console.error
    [YOUTUBE-SEARCH-ERROR]: Cannot read properties of undefined (reading 'map')

    [0m [90m 67 |[39m       }[33m;[39m
     [90m 68 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 69 |[39m       console[33m.[39merror([32m'[YOUTUBE-SEARCH-ERROR]:'[39m[33m,[39m error[33m.[39mresponse[33m?[39m[33m.[39mdata [33m||[39m error[33m.[39mmessage)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 70 |[39m
     [90m 71 |[39m       [90m// Check if API key is invalid[39m
     [90m 72 |[39m       [36mif[39m (error[33m.[39mresponse[33m?[39m[33m.[39mstatus [33m===[39m [35m400[39m [33m||[39m error[33m.[39mresponse[33m?[39m[33m.[39mstatus [33m===[39m [35m403[39m) {[0m

      at YouTubeService.searchVideos (services/youtubeService.js:69:15)
      at Object.<anonymous> (tests/unit/youtubeService.test.js:137:22)

(node:10128) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/unit/youtubeService.test.js (10.141 s)
  YoutubeService
    isConfigured
      Î“ÃªÃœ should return false when API key is missing (235 ms)
      Î“ÃªÃœ should return true when API key is present (3 ms)
    parseDuration
      â”œÃ¹ should parse ISO 8601 duration correctly (16 ms)
      Î“ÃªÃœ should handle invalid duration format (2 ms)
    formatViewCount
      Î“ÃªÃœ should format view counts correctly (5 ms)
      Î“ÃªÃœ should handle zero views (1 ms)
    formatNumber
      Î“ÃªÃœ should format numbers with commas (60 ms)
    getFallbackUrl
      â”œÃ¹ should generate correct fallback URL for search (9 ms)
      Î“ÃªÃœ should generate correct fallback URL for watch (2 ms)
      Î“ÃªÃœ should handle missing query parameter (1 ms)
    searchVideos
      Î“ÃªÃœ should return fallback when not configured (8 ms)
      Î“ÃªÃœ should handle empty query (901 ms)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ parseDuration Î“Ã‡â•‘ should parse ISO 8601 duration correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: "15:30"
    Received: "0:15:30"

      44 |       testCases.forEach(({ input, expected }) => {
      45 |         const result = youtubeService.parseDuration(input);
    > 46 |         expect(result.formatted).toBe(expected);
         |                                  ^
      47 |       });
      48 |     });
      49 |

      at tests/unit/youtubeService.test.js:46:34
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/unit/youtubeService.test.js:44:17)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL for search

    expect(received).toContain(expected) // indexOf

    Expected substring: "search_query=test+video"
    Received string:    "https://www.youtube.com/results?search_query=test%20video"

       99 |
      100 |       expect(result.url).toContain('youtube.com/results');
    > 101 |       expect(result.url).toContain('search_query=test+video');
          |                          ^
      102 |     });
      103 |
      104 |     test('should generate correct fallback URL for watch', () => {

      at Object.<anonymous> (tests/unit/youtubeService.test.js:101:26)

PASS tests/unit/notesService.test.js
  notes Service
    initialization
      Î“ÃªÃœ should initialize correctly (275 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (2 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (3 ms)

PASS tests/unit/security.test.js
  Security Tests
    Î“ÃªÃœ should have a placeholder test (8 ms)

PASS tests/unit/conversationService.test.js
  conversation Service
    initialization
      Î“ÃªÃœ should initialize correctly (9 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (3 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (3 ms)

PASS tests/unit/gmailService.test.js
  gmail Service
    initialization
      Î“ÃªÃœ should initialize correctly (14 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (7 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (4 ms)

PASS tests/integration/spotify.test.js
  Spotify Integration Tests
    Î“ÃªÃœ should have a placeholder test (10 ms)

PASS tests/unit/weatherService.cached.test.js
  weather.cached Service
    initialization
      Î“ÃªÃœ should initialize correctly (9 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (4 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (105 ms)

PASS tests/unit/deviceManager.test.js
  deviceManager Service
    device control operations
      Î“ÃªÃœ should support bluetooth device control (16 ms)
      Î“ÃªÃœ should handle device connection (3 ms)
      Î“ÃªÃœ should support multiple device types (2 ms)
    error handling
      Î“ÃªÃœ should handle connection errors (4 ms)
      Î“ÃªÃœ should handle timeout errors (3 ms)
    device capabilities
      Î“ÃªÃœ should validate device actions (3 ms)
      Î“ÃªÃœ should validate chromecast actions (2 ms)

PASS tests/integration/music.test.js
  Music Integration Tests
    Î“ÃªÃœ should have a placeholder test (9 ms)

PASS tests/unit/newsService.test.js
  news Service
    initialization
      Î“ÃªÃœ should initialize correctly (13 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (2 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (22 ms)

PASS tests/unit/calendarService.test.js
  calendar Service
    initialization
      Î“ÃªÃœ should initialize correctly (8 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (3 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (3 ms)

PASS tests/unit/reminderService.test.js
  reminder Service
    initialization
      Î“ÃªÃœ should initialize correctly (9 ms)
    error handling
      Î“ÃªÃœ should handle errors gracefully (4 ms)
    main functionality
      Î“ÃªÃœ should perform core operations (4 ms)

(node:7120) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:2580) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:10848) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

FAIL tests/integration/youtube.routes.test.js (24.352 s)
  YouTube Routes
    POST /api/youtube/search
      â”œÃ¹ should return 400 for empty query (637 ms)
      â”œÃ¹ should return search results or fallback (57 ms)
      â”œÃ¹ should use default maxResults when not provided (46 ms)
    POST /api/youtube/video/:videoId
      â”œÃ¹ should return video details or fallback (70 ms)
      Î“ÃªÃœ should handle invalid video ID format (42 ms)
    POST /api/youtube/channel/search
      â”œÃ¹ should return 400 for empty query (37 ms)
      â”œÃ¹ should return channel search results (36 ms)
    POST /api/youtube/channel/:channelId
      â”œÃ¹ should return channel info or fallback (35 ms)
    POST /api/youtube/trending
      â”œÃ¹ should return trending videos (40 ms)
      â”œÃ¹ should use default maxResults when not provided (38 ms)
      â”œÃ¹ should handle regionCode parameter (96 ms)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      25 |         .set('Cookie', [`token=${token}`])
      26 |         .send({ query: '' })
    > 27 |         .expect('Content-Type', /json/);
         |          ^
      28 |
      29 |       expect(response.status).toBe(400);
      30 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:27:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should return search results or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      36 |         .set('Cookie', [`token=${token}`])
      37 |         .send({ query: 'test video', maxResults: 5 })
    > 38 |         .expect('Content-Type', /json/);
         |          ^
      39 |
      40 |       expect(response.status).toBe(200);
      41 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:38:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should use default maxResults when not provided

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      47 |         .set('Cookie', [`token=${token}`])
      48 |         .send({ query: 'test video' })
    > 49 |         .expect('Content-Type', /json/);
         |          ^
      50 |
      51 |       expect(response.status).toBe(200);
      52 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:49:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/video/:videoId Î“Ã‡â•‘ should return video details or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      59 |         .post('/api/youtube/video/dQw4w9WgXcQ')
      60 |         .set('Cookie', [`token=${token}`])
    > 61 |         .expect('Content-Type', /json/);
         |          ^
      62 |
      63 |       expect(response.status).toBe(200);
      64 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:61:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      79 |         .set('Cookie', [`token=${token}`])
      80 |         .send({ query: '' })
    > 81 |         .expect('Content-Type', /json/);
         |          ^
      82 |
      83 |       expect(response.status).toBe(400);
      84 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:81:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/search Î“Ã‡â•‘ should return channel search results

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      90 |         .set('Cookie', [`token=${token}`])
      91 |         .send({ query: 'test channel', maxResults: 5 })
    > 92 |         .expect('Content-Type', /json/);
         |          ^
      93 |
      94 |       expect(response.status).toBe(200);
      95 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:92:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/:channelId Î“Ã‡â•‘ should return channel info or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      102 |         .post('/api/youtube/channel/UCtest123')
      103 |         .set('Cookie', [`token=${token}`])
    > 104 |         .expect('Content-Type', /json/);
          |          ^
      105 |
      106 |       expect(response.status).toBe(200);
      107 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:104:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should return trending videos

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      115 |         .set('Cookie', [`token=${token}`])
      116 |         .send({ maxResults: 10 })
    > 117 |         .expect('Content-Type', /json/);
          |          ^
      118 |
      119 |       expect(response.status).toBe(200);
      120 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:117:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should use default maxResults when not provided

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      126 |         .set('Cookie', [`token=${token}`])
      127 |         .send({})
    > 128 |         .expect('Content-Type', /json/);
          |          ^
      129 |
      130 |       expect(response.status).toBe(200);
      131 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:128:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should handle regionCode parameter

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      137 |         .set('Cookie', [`token=${token}`])
      138 |         .send({ regionCode: 'US', maxResults: 5 })
    > 139 |         .expect('Content-Type', /json/);
          |          ^
      140 |
      141 |       expect(response.status).toBe(200);
      142 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:139:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:122:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:113:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:113:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:122:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:122:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:122:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:113:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:113:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

FAIL tests/integration/translate.routes.test.js (24.775 s)
  Translate Routes
    POST /api/translate
      â”œÃ¹ should return 400 for empty text (1595 ms)
      â”œÃ¹ should return 400 for missing target language (97 ms)
      â”œÃ¹ should return translation or fallback (83 ms)
      â”œÃ¹ should handle auto-detect source language (221 ms)
    POST /api/translate/detect
      â”œÃ¹ should return 400 for empty text (83 ms)
      â”œÃ¹ should detect language (107 ms)
    GET /api/translate/languages
      â”œÃ¹ should return list of supported languages (155 ms)
      â”œÃ¹ should return languages with code and name (97 ms)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return 400 for empty text

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      20 |         .expect('Content-Type', /json/);
      21 |       
    > 22 |       expect(response.status).toBe(400);
         |                               ^
      23 |       expect(response.body).toHaveProperty('error');
      24 |     });
      25 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:22:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return 400 for missing target language

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      30 |         .expect('Content-Type', /json/);
      31 |       
    > 32 |       expect(response.status).toBe(400);
         |                               ^
      33 |       expect(response.body).toHaveProperty('error');
      34 |     });
      35 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:32:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return translation or fallback

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      44 |         .expect('Content-Type', /json/);
      45 |       
    > 46 |       expect(response.status).toBe(200);
         |                               ^
      47 |       expect(response.body).toHaveProperty('success');
      48 |     });
      49 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:46:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should handle auto-detect source language

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      57 |         .expect('Content-Type', /json/);
      58 |       
    > 59 |       expect(response.status).toBe(200);
         |                               ^
      60 |       expect(response.body).toHaveProperty('success');
      61 |     });
      62 |   });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:59:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate/detect Î“Ã‡â•‘ should return 400 for empty text

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      69 |         .expect('Content-Type', /json/);
      70 |       
    > 71 |       expect(response.status).toBe(400);
         |                               ^
      72 |       expect(response.body).toHaveProperty('error');
      73 |     });
      74 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:71:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate/detect Î“Ã‡â•‘ should detect language

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      79 |         .expect('Content-Type', /json/);
      80 |       
    > 81 |       expect(response.status).toBe(200);
         |                               ^
      82 |       expect(response.body).toHaveProperty('success');
      83 |     });
      84 |   });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:81:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ GET /api/translate/languages Î“Ã‡â•‘ should return list of supported languages

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      90 |         .expect('Content-Type', /json/);
      91 |       
    > 92 |       expect(response.status).toBe(200);
         |                               ^
      93 |       expect(response.body).toHaveProperty('success');
      94 |       expect(response.body).toHaveProperty('languages');
      95 |       expect(Array.isArray(response.body.languages)).toBe(true);

      at Object.<anonymous> (tests/integration/translate.routes.test.js:92:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ GET /api/translate/languages Î“Ã‡â•‘ should return languages with code and name

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      102 |         .expect('Content-Type', /json/);
      103 |       
    > 104 |       expect(response.status).toBe(200);
          |                               ^
      105 |       expect(response.body.languages[0]).toHaveProperty('code');
      106 |       expect(response.body.languages[0]).toHaveProperty('name');
      107 |     });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:104:31)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\read.js:137:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:238:16)
        at done (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:227:7)
        at IncomingMessage.onEnd (E:\AI-Powered-Virtual-Assistant\backend\node_modules\raw-body\index.js:287:7)
        at IncomingMessage.emit (node:events:507:28)
        at endReadableNT (node:internal/streams/readable:1701:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/body-parser/lib/read.js:137:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Auth Error: TypeError: Cannot read properties of undefined (reading 'token')
        at isAuth (E:\AI-Powered-Virtual-Assistant\backend\middlewares\isAuth.js:4:35)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:284:15
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at router (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at jsonParser (E:\AI-Powered-Virtual-Assistant\backend\node_modules\body-parser\lib\types\json.js:113:7)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at expressInit (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\init.js:40:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at query (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\middleware\query.js:45:5)
        at Layer.handle [as handle_request] (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:328:13)
        at E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:286:9
        at router.process_params (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:346:12)
        at next (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:280:10)
        at router.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\router\index.js:175:3)
        at app.handle (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\application.js:181:10)
        at Server.app (E:\AI-Powered-Virtual-Assistant\backend\node_modules\express\lib\express.js:39:9)
        at Server.emit (node:events:507:28)
        at parserOnIncoming (node:_http_server:1153:12)
        at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)

    [0m [90m 21 |[39m         next()[33m;[39m
     [90m 22 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 23 |[39m         console[33m.[39merror([32m'Auth Error:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 24 |[39m         [36mif[39m (error[33m.[39mname [33m===[39m [32m'JsonWebTokenError'[39m) {
     [90m 25 |[39m             [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 26 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m[0m

      at isAuth (middlewares/isAuth.js:23:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at jsonParser (node_modules/body-parser/lib/types/json.js:113:7)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at expressInit (node_modules/express/lib/middleware/init.js:40:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at query (node_modules/express/lib/middleware/query.js:45:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at router.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at router.handle (node_modules/express/lib/router/index.js:175:3)
      at app.handle (node_modules/express/lib/application.js:181:10)
      at Server.app (node_modules/express/lib/express.js:39:9)

FAIL tests/integration/music.routes.test.js (25.341 s)
  Music Routes
    GET /api/music/auth
      â”œÃ¹ should return auth URL or fallback (448 ms)
    POST /api/music/search
      â”œÃ¹ should return 400 for empty query (233 ms)
      â”œÃ¹ should return search results or fallback (47 ms)
    POST /api/music/play
      â”œÃ¹ should return 400 for missing uri (1296 ms)
      â”œÃ¹ should handle play request (140 ms)
    POST /api/music/pause
      â”œÃ¹ should handle pause request (130 ms)
    POST /api/music/next
      â”œÃ¹ should handle next track request (67 ms)
    POST /api/music/previous
      â”œÃ¹ should handle previous track request (53 ms)
    POST /api/music/volume
      â”œÃ¹ should return 400 for missing volume (85 ms)
      â”œÃ¹ should return 400 for invalid volume (71 ms)
      â”œÃ¹ should handle valid volume request (95 ms)
    GET /api/music/current
      â”œÃ¹ should return current playback info (81 ms)
    GET /api/music/devices
      â”œÃ¹ should return available devices (50 ms)
    POST /api/music/device
      â”œÃ¹ should return 400 for missing deviceId (47 ms)
      â”œÃ¹ should handle device change request (38 ms)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/auth Î“Ã‡â•‘ should return auth URL or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      17 |       const response = await request(app)
      18 |         .get('/api/music/auth')
    > 19 |         .expect('Content-Type', /json/);
         |          ^
      20 |       
      21 |       expect(response.status).toBe(200);
      22 |       expect(response.body).toHaveProperty('url');

      at Object.<anonymous> (tests/integration/music.routes.test.js:19:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      30 |         .post('/api/music/search')
      31 |         .send({ query: '' })
    > 32 |         .expect('Content-Type', /json/);
         |          ^
      33 |       
      34 |       expect(response.status).toBe(400);
      35 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/music.routes.test.js:32:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/search Î“Ã‡â•‘ should return search results or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      40 |         .post('/api/music/search')
      41 |         .send({ query: 'test song', limit: 5 })
    > 42 |         .expect('Content-Type', /json/);
         |          ^
      43 |       
      44 |       expect(response.status).toBe(200);
      45 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:42:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/play Î“Ã‡â•‘ should return 400 for missing uri

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      54 |         .expect('Content-Type', /json/);
      55 |       
    > 56 |       expect(response.status).toBe(400);
         |                               ^
      57 |       expect(response.body).toHaveProperty('error');
      58 |     });
      59 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:56:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/play Î“Ã‡â•‘ should handle play request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      64 |         .expect('Content-Type', /json/);
      65 |       
    > 66 |       expect(response.status).toBe(200);
         |                               ^
      67 |       expect(response.body).toHaveProperty('success');
      68 |     });
      69 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:66:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/pause Î“Ã‡â•‘ should handle pause request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      75 |         .expect('Content-Type', /json/);
      76 |       
    > 77 |       expect(response.status).toBe(200);
         |                               ^
      78 |       expect(response.body).toHaveProperty('success');
      79 |     });
      80 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:77:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/next Î“Ã‡â•‘ should handle next track request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      86 |         .expect('Content-Type', /json/);
      87 |       
    > 88 |       expect(response.status).toBe(200);
         |                               ^
      89 |       expect(response.body).toHaveProperty('success');
      90 |     });
      91 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:88:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/previous Î“Ã‡â•‘ should handle previous track request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

       97 |         .expect('Content-Type', /json/);
       98 |       
    >  99 |       expect(response.status).toBe(200);
          |                               ^
      100 |       expect(response.body).toHaveProperty('success');
      101 |     });
      102 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:99:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should return 400 for missing volume

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      109 |         .expect('Content-Type', /json/);
      110 |       
    > 111 |       expect(response.status).toBe(400);
          |                               ^
      112 |       expect(response.body).toHaveProperty('error');
      113 |     });
      114 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:111:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should return 400 for invalid volume

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      119 |         .expect('Content-Type', /json/);
      120 |       
    > 121 |       expect(response.status).toBe(400);
          |                               ^
      122 |       expect(response.body.error).toContain('0-100');
      123 |     });
      124 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:121:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should handle valid volume request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      129 |         .expect('Content-Type', /json/);
      130 |       
    > 131 |       expect(response.status).toBe(200);
          |                               ^
      132 |       expect(response.body).toHaveProperty('success');
      133 |     });
      134 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:131:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/current Î“Ã‡â•‘ should return current playback info

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      140 |         .expect('Content-Type', /json/);
      141 |       
    > 142 |       expect(response.status).toBe(200);
          |                               ^
      143 |       expect(response.body).toHaveProperty('success');
      144 |     });
      145 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:142:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/devices Î“Ã‡â•‘ should return available devices

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      149 |       const response = await request(app)
      150 |         .get('/api/music/devices')
    > 151 |         .expect('Content-Type', /json/);
          |          ^
      152 |       
      153 |       expect(response.status).toBe(200);
      154 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:151:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/device Î“Ã‡â•‘ should return 400 for missing deviceId

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      161 |         .post('/api/music/device')
      162 |         .send({})
    > 163 |         .expect('Content-Type', /json/);
          |          ^
      164 |       
      165 |       expect(response.status).toBe(400);
      166 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/music.routes.test.js:163:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/device Î“Ã‡â•‘ should handle device change request

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      171 |         .post('/api/music/device')
      172 |         .send({ deviceId: 'test-device-123' })
    > 173 |         .expect('Content-Type', /json/);
          |          ^
      174 |       
      175 |       expect(response.status).toBe(200);
      176 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:173:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

FAIL tests/integration/weather.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/wikipedia.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/search.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/notes.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/user.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/reminder.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/news.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/gmail.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/device.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/calendar.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/auth.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

Summary of all failing tests
FAIL tests/unit/spotifyService.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: Unexpected identifier 'spotifyService'

      at Runtime.loadEsmModule (node_modules/jest-runtime/build/index.js:516:20)

FAIL tests/unit/youtubeService.test.js (10.141 s)
  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ parseDuration Î“Ã‡â•‘ should parse ISO 8601 duration correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: "15:30"
    Received: "0:15:30"

      44 |       testCases.forEach(({ input, expected }) => {
      45 |         const result = youtubeService.parseDuration(input);
    > 46 |         expect(result.formatted).toBe(expected);
         |                                  ^
      47 |       });
      48 |     });
      49 |

      at tests/unit/youtubeService.test.js:46:34
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/unit/youtubeService.test.js:44:17)

  Î“Ã¹Ã… YoutubeService Î“Ã‡â•‘ getFallbackUrl Î“Ã‡â•‘ should generate correct fallback URL for search

    expect(received).toContain(expected) // indexOf

    Expected substring: "search_query=test+video"
    Received string:    "https://www.youtube.com/results?search_query=test%20video"

       99 |
      100 |       expect(result.url).toContain('youtube.com/results');
    > 101 |       expect(result.url).toContain('search_query=test+video');
          |                          ^
      102 |     });
      103 |
      104 |     test('should generate correct fallback URL for watch', () => {

      at Object.<anonymous> (tests/unit/youtubeService.test.js:101:26)

FAIL tests/integration/youtube.routes.test.js (24.352 s)
  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      25 |         .set('Cookie', [`token=${token}`])
      26 |         .send({ query: '' })
    > 27 |         .expect('Content-Type', /json/);
         |          ^
      28 |
      29 |       expect(response.status).toBe(400);
      30 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:27:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should return search results or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      36 |         .set('Cookie', [`token=${token}`])
      37 |         .send({ query: 'test video', maxResults: 5 })
    > 38 |         .expect('Content-Type', /json/);
         |          ^
      39 |
      40 |       expect(response.status).toBe(200);
      41 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:38:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/search Î“Ã‡â•‘ should use default maxResults when not provided

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      47 |         .set('Cookie', [`token=${token}`])
      48 |         .send({ query: 'test video' })
    > 49 |         .expect('Content-Type', /json/);
         |          ^
      50 |
      51 |       expect(response.status).toBe(200);
      52 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:49:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/video/:videoId Î“Ã‡â•‘ should return video details or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      59 |         .post('/api/youtube/video/dQw4w9WgXcQ')
      60 |         .set('Cookie', [`token=${token}`])
    > 61 |         .expect('Content-Type', /json/);
         |          ^
      62 |
      63 |       expect(response.status).toBe(200);
      64 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:61:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      79 |         .set('Cookie', [`token=${token}`])
      80 |         .send({ query: '' })
    > 81 |         .expect('Content-Type', /json/);
         |          ^
      82 |
      83 |       expect(response.status).toBe(400);
      84 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:81:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/search Î“Ã‡â•‘ should return channel search results

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      90 |         .set('Cookie', [`token=${token}`])
      91 |         .send({ query: 'test channel', maxResults: 5 })
    > 92 |         .expect('Content-Type', /json/);
         |          ^
      93 |
      94 |       expect(response.status).toBe(200);
      95 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:92:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/channel/:channelId Î“Ã‡â•‘ should return channel info or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      102 |         .post('/api/youtube/channel/UCtest123')
      103 |         .set('Cookie', [`token=${token}`])
    > 104 |         .expect('Content-Type', /json/);
          |          ^
      105 |
      106 |       expect(response.status).toBe(200);
      107 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:104:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should return trending videos

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      115 |         .set('Cookie', [`token=${token}`])
      116 |         .send({ maxResults: 10 })
    > 117 |         .expect('Content-Type', /json/);
          |          ^
      118 |
      119 |       expect(response.status).toBe(200);
      120 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:117:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should use default maxResults when not provided

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      126 |         .set('Cookie', [`token=${token}`])
      127 |         .send({})
    > 128 |         .expect('Content-Type', /json/);
          |          ^
      129 |
      130 |       expect(response.status).toBe(200);
      131 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:128:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… YouTube Routes Î“Ã‡â•‘ POST /api/youtube/trending Î“Ã‡â•‘ should handle regionCode parameter

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      137 |         .set('Cookie', [`token=${token}`])
      138 |         .send({ regionCode: 'US', maxResults: 5 })
    > 139 |         .expect('Content-Type', /json/);
          |          ^
      140 |
      141 |       expect(response.status).toBe(200);
      142 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/youtube.routes.test.js:139:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

FAIL tests/integration/translate.routes.test.js (24.775 s)
  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return 400 for empty text

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      20 |         .expect('Content-Type', /json/);
      21 |       
    > 22 |       expect(response.status).toBe(400);
         |                               ^
      23 |       expect(response.body).toHaveProperty('error');
      24 |     });
      25 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:22:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return 400 for missing target language

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      30 |         .expect('Content-Type', /json/);
      31 |       
    > 32 |       expect(response.status).toBe(400);
         |                               ^
      33 |       expect(response.body).toHaveProperty('error');
      34 |     });
      35 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:32:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should return translation or fallback

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      44 |         .expect('Content-Type', /json/);
      45 |       
    > 46 |       expect(response.status).toBe(200);
         |                               ^
      47 |       expect(response.body).toHaveProperty('success');
      48 |     });
      49 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:46:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate Î“Ã‡â•‘ should handle auto-detect source language

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      57 |         .expect('Content-Type', /json/);
      58 |       
    > 59 |       expect(response.status).toBe(200);
         |                               ^
      60 |       expect(response.body).toHaveProperty('success');
      61 |     });
      62 |   });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:59:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate/detect Î“Ã‡â•‘ should return 400 for empty text

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      69 |         .expect('Content-Type', /json/);
      70 |       
    > 71 |       expect(response.status).toBe(400);
         |                               ^
      72 |       expect(response.body).toHaveProperty('error');
      73 |     });
      74 |

      at Object.<anonymous> (tests/integration/translate.routes.test.js:71:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ POST /api/translate/detect Î“Ã‡â•‘ should detect language

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      79 |         .expect('Content-Type', /json/);
      80 |       
    > 81 |       expect(response.status).toBe(200);
         |                               ^
      82 |       expect(response.body).toHaveProperty('success');
      83 |     });
      84 |   });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:81:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ GET /api/translate/languages Î“Ã‡â•‘ should return list of supported languages

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      90 |         .expect('Content-Type', /json/);
      91 |       
    > 92 |       expect(response.status).toBe(200);
         |                               ^
      93 |       expect(response.body).toHaveProperty('success');
      94 |       expect(response.body).toHaveProperty('languages');
      95 |       expect(Array.isArray(response.body.languages)).toBe(true);

      at Object.<anonymous> (tests/integration/translate.routes.test.js:92:31)

  Î“Ã¹Ã… Translate Routes Î“Ã‡â•‘ GET /api/translate/languages Î“Ã‡â•‘ should return languages with code and name

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      102 |         .expect('Content-Type', /json/);
      103 |       
    > 104 |       expect(response.status).toBe(200);
          |                               ^
      105 |       expect(response.body.languages[0]).toHaveProperty('code');
      106 |       expect(response.body.languages[0]).toHaveProperty('name');
      107 |     });

      at Object.<anonymous> (tests/integration/translate.routes.test.js:104:31)

FAIL tests/integration/music.routes.test.js (25.341 s)
  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/auth Î“Ã‡â•‘ should return auth URL or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      17 |       const response = await request(app)
      18 |         .get('/api/music/auth')
    > 19 |         .expect('Content-Type', /json/);
         |          ^
      20 |       
      21 |       expect(response.status).toBe(200);
      22 |       expect(response.body).toHaveProperty('url');

      at Object.<anonymous> (tests/integration/music.routes.test.js:19:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/search Î“Ã‡â•‘ should return 400 for empty query

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      30 |         .post('/api/music/search')
      31 |         .send({ query: '' })
    > 32 |         .expect('Content-Type', /json/);
         |          ^
      33 |       
      34 |       expect(response.status).toBe(400);
      35 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/music.routes.test.js:32:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/search Î“Ã‡â•‘ should return search results or fallback

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      40 |         .post('/api/music/search')
      41 |         .send({ query: 'test song', limit: 5 })
    > 42 |         .expect('Content-Type', /json/);
         |          ^
      43 |       
      44 |       expect(response.status).toBe(200);
      45 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:42:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/play Î“Ã‡â•‘ should return 400 for missing uri

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      54 |         .expect('Content-Type', /json/);
      55 |       
    > 56 |       expect(response.status).toBe(400);
         |                               ^
      57 |       expect(response.body).toHaveProperty('error');
      58 |     });
      59 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:56:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/play Î“Ã‡â•‘ should handle play request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      64 |         .expect('Content-Type', /json/);
      65 |       
    > 66 |       expect(response.status).toBe(200);
         |                               ^
      67 |       expect(response.body).toHaveProperty('success');
      68 |     });
      69 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:66:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/pause Î“Ã‡â•‘ should handle pause request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      75 |         .expect('Content-Type', /json/);
      76 |       
    > 77 |       expect(response.status).toBe(200);
         |                               ^
      78 |       expect(response.body).toHaveProperty('success');
      79 |     });
      80 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:77:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/next Î“Ã‡â•‘ should handle next track request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      86 |         .expect('Content-Type', /json/);
      87 |       
    > 88 |       expect(response.status).toBe(200);
         |                               ^
      89 |       expect(response.body).toHaveProperty('success');
      90 |     });
      91 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:88:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/previous Î“Ã‡â•‘ should handle previous track request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

       97 |         .expect('Content-Type', /json/);
       98 |       
    >  99 |       expect(response.status).toBe(200);
          |                               ^
      100 |       expect(response.body).toHaveProperty('success');
      101 |     });
      102 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:99:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should return 400 for missing volume

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      109 |         .expect('Content-Type', /json/);
      110 |       
    > 111 |       expect(response.status).toBe(400);
          |                               ^
      112 |       expect(response.body).toHaveProperty('error');
      113 |     });
      114 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:111:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should return 400 for invalid volume

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      119 |         .expect('Content-Type', /json/);
      120 |       
    > 121 |       expect(response.status).toBe(400);
          |                               ^
      122 |       expect(response.body.error).toContain('0-100');
      123 |     });
      124 |

      at Object.<anonymous> (tests/integration/music.routes.test.js:121:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/volume Î“Ã‡â•‘ should handle valid volume request

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      129 |         .expect('Content-Type', /json/);
      130 |       
    > 131 |       expect(response.status).toBe(200);
          |                               ^
      132 |       expect(response.body).toHaveProperty('success');
      133 |     });
      134 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:131:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/current Î“Ã‡â•‘ should return current playback info

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      140 |         .expect('Content-Type', /json/);
      141 |       
    > 142 |       expect(response.status).toBe(200);
          |                               ^
      143 |       expect(response.body).toHaveProperty('success');
      144 |     });
      145 |   });

      at Object.<anonymous> (tests/integration/music.routes.test.js:142:31)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ GET /api/music/devices Î“Ã‡â•‘ should return available devices

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      149 |       const response = await request(app)
      150 |         .get('/api/music/devices')
    > 151 |         .expect('Content-Type', /json/);
          |          ^
      152 |       
      153 |       expect(response.status).toBe(200);
      154 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:151:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/device Î“Ã‡â•‘ should return 400 for missing deviceId

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      161 |         .post('/api/music/device')
      162 |         .send({})
    > 163 |         .expect('Content-Type', /json/);
          |          ^
      164 |       
      165 |       expect(response.status).toBe(400);
      166 |       expect(response.body).toHaveProperty('error');

      at Object.<anonymous> (tests/integration/music.routes.test.js:163:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

  Î“Ã¹Ã… Music Routes Î“Ã‡â•‘ POST /api/music/device Î“Ã‡â•‘ should handle device change request

    expected "Content-Type" matching /json/, got "text/html; charset=utf-8"

      171 |         .post('/api/music/device')
      172 |         .send({ deviceId: 'test-device-123' })
    > 173 |         .expect('Content-Type', /json/);
          |          ^
      174 |       
      175 |       expect(response.status).toBe(200);
      176 |       expect(response.body).toHaveProperty('success');

      at Object.<anonymous> (tests/integration/music.routes.test.js:173:10)
      ----
      at Test._assertHeader (node_modules/supertest/lib/test.js:232:16)
      at node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:285:13)
      at Test.assert (node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:120:14)

FAIL tests/integration/weather.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/wikipedia.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/search.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/notes.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/user.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/reminder.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/news.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/gmail.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/device.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/calendar.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)

FAIL tests/integration/auth.routes.test.js
  Î“Ã¹Ã… Test suite failed to run

    SyntaxError: The requested module 'cloudinary' does not provide an export named 'v2'

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:708:5)


Test Suites: 16 failed, 17 passed, 33 total
Tests:       35 failed, 79 passed, 114 total
Snapshots:   0 total
Time:        38.843 s
Ran all test suites.
